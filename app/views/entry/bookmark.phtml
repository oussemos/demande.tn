<?php
header('Content-Type: application/json; charset=UTF-8');

if (Request::param ('is_favorite')) {
	Request::_param ('is_favorite', 0);
} else {
	Request::_param ('is_favorite', 1);
}

$url = Url::display (array (
	'c' => Request::controllerName (),
	'a' => Request::actionName (),
	'params' => Request::params (),
));

echo json_encode (array ('url' => str_ireplace ('&amp;', '&', $url), 'icon' => RSSThemes::icon(Request::param ('is_favorite') ? 'non-starred' : 'starred')));
